Id:
<input id="dbid" name="id" value="1">
<br>
<h3 id="dbverdi"></h3>
<h3 id="feilmelding"></h3>

<button id="toggle">Start</button>

<script src="/socket.io/socket.io.js"></script>

<script type="text/javascript">

    var socket = io();


    let txtDbId;

    let btnToggle = document.getElementById('toggle');
    var running = false;
    btnToggle.addEventListener("click", function () {
        if (running) {
            running = false;
            this.textContent = "Start";
        } else {
            txtDbId = document.getElementById('dbid').value
            running = true;
            this.textContent = "Stop";
        }
    });

    // Inspirert av https://github.com/jchiella/quietdowner/
    navigator.getUserMedia = navigator.getUserMedia ||
        navigator.webkitGetUserMedia ||
        navigator.mozGetUserMedia;

    if (navigator.getUserMedia) {
        navigator.getUserMedia({
                audio: true
            },
            (stream) => {
                audioContext = new AudioContext();
                analyser = audioContext.createAnalyser();
                microphone = audioContext.createMediaStreamSource(stream);
                javascriptNode = audioContext.createScriptProcessor(2048, 1, 1);

                analyser.smoothingTimeConstant = 0.8;
                analyser.fftSize = 1024;

                microphone.connect(analyser);
                analyser.connect(javascriptNode);
                javascriptNode.connect(audioContext.destination);


                javascriptNode.onaudioprocess = () => {
                    var array = new Uint8Array(analyser.frequencyBinCount);
                    analyser.getByteFrequencyData(array);
                    var values = 0;

                    var length = array.length;
                    for (var i = 0; i < length; i++) {
                        values += (array[i]);
                    }

                    const average = values / length;

                    renderMeter(average);
                }
            },
            (err) => {
                console.log("The following error occured: " + err.name);
            });
    } else {
        console.log("getUserMedia not supported");
        document.getElementById('feilmelding').textContent = "getUserMedia not supported"
    }

    const renderMeter = (average) => {
        if (running) {
            const dbs = Math.round(average);
            document.getElementById('dbverdi').textContent = `dB: ${dbs}`
            var db = {}
            db.db = dbs;
            db.id = txtDbId;
            socket.emit('db', db);
            console.log(db);
        }
    }

</script>